# 会员管理

### 一、会员等级

|	等级设置	|	等级规则	|

**tab1:等级设置**

| 等级编号 | 会员等级 | 等级卡片图片 | 升级规则 | 消费金额 | 扣率 | 创建时间 | 修改时间 | 商品id                 |
| -------- | -------- | ------------ | -------- | -------- | ---- | -------- | -------- | ---------------------- |
|          |          |              |          |          |      |          |          | 逗号隔开，为空全部默认 |

**tab2:等级规则**

| 等级规则内容               | 创建时间 |
| -------------------------- | -------- |
| 字段类型为36，（富文本框） |          |



### 二、会员信息

1. **主表：会员信息**

| 会员号 |      | 手机     |      | 会员姓名 |
| ------ | ---- | -------- | ---- | -------- |
| 性别   |      | 等级     |      | 累计充值 |
| 余额   |      | 剩余积分 |      | 生日     |
|        |      | 注册时间 |      |          |

2. **子表  交易流水**

| 姓名 | 订单     | 优惠活动 | 优惠方式 | 折扣总额 | 消费积分 | 获得积分 | 消费方式       | 消费金额 | 订单日期 |
| ---- | -------- | -------- | -------- | -------- | -------- | -------- | -------------- | -------- | -------- |
| xxx  | xxxxxx01 | 生日活动 | 满100-10 | 0        | 10       | 1        | 余额\|在线支付 | 990      |          |

3. **子表2  充值流水**

| 姓名 | 充值订单 | 优惠活动 | 优惠方式  | 充值金额 | 订单日期 |
| ---- | -------- | -------- | --------- | -------- | -------- |
| xxx  | xxxxxx01 | 充值活动 | 冲100送30 | 0        |          |

### 

### 三、优惠活动

活动开始后，不支持修改券数量以及券的内容

| 活动编号 | 活动名称       | 活动规则 | 积分编号 | 创建日期 | 开始时间     | 结束时间         | 状态 |
| -------- | -------------- | -------- | -------- | -------- | ------------ | ---------------- | ---- |
| 01       | 生日活动(固定) |          |          |          |              | 为空表示永久有效 |      |
| 02       | 充值活动       |          | 01       |          | 2020-7-2 16  |                  |      |
| 03       | xxx活动        |          |          |          | 大于当前时间 |                  |      |

### 四、优惠券

  **同一个人同一张券只能领取一次**

减和加不能同时存在

| 券编号 | 券名 | 券类型 | 券内容 | 券图片 | 优惠方式（下拉） | 发放时间 | 满   | 减   | 加   | 发放数值         | 有效初期 | 有效末期 | 失效状态 | 和等级叠加 | 和积分叠加 | 商品id                 | 发放状态           | 已用数量 |
| ------ | ---- | ------ | ------ | ------ | ---------------- | -------- | ---- | ---- | ---- | ---------------- | -------- | -------- | -------- | ---------- | ---------- | ---------------------- | ------------------ | -------- |
|        |      | 充值   |        |        | 满减、折扣       |          | √    |      | √    | 为空表示没有上限 |          | 为空永久 |          |            |            | 逗号拼接，为空默认全部 | 待发、已发、已领完 |          |
|        |      | 消费   |        |        |                  |          | √    | √    |      | 100              |          |          |          |            |            |                        |                    |          |


（券		表：券编号，名称，内容，图片，优惠编号，发放时间，发放周期，周期发送数，已发数量，已用数量，总数量，初始时间，结束时间，开启状态，创建时间，是否和会员叠加，是否和积分叠加）待修改

 **子表**

| 券编号 | 会员id | 会员姓名 | 手机号 | 领取数量 | 领取时间 | 已用状态 |
| ------ | ------ | -------- | ------ | -------- | -------- | -------- |
|        |        |          |        |          |          |          |



领券关系：券编号，会员id，领取数量，消费数量，领取时间，失效状态

### 六、积分设置

**主表：积分抵扣比例**

积分抵扣比例：单页

**子表：置换积分设置**

| 积分编号 | 积分类型 | 等级 | 金额 | 获得积分 | 创建时间 | 商品id           |
| -------- | -------- | ---- | ---- | -------- | -------- | ---------------- |
| 01       | 消费     |      | 1000 | 1        |          | 类型为空默认全部 |
| 02       | 充值     |      | 100  | 1        |          | 为空             |



### 七、优惠规则

如果同时存在三种优惠方式：

优先顺序选项1到3，可以相同，抵扣顺序相同的抵扣金额累计，再用订单总额-累计抵扣金额，抵扣顺序后面的，在上面优惠之后的金额上进行抵扣(主要在满减抵扣时有影响)

| 优惠方式 | 抵扣顺序 |
| -------- | -------- |
| 优惠券   | 1        |
| 等级     | 1        |
| 积分抵现 | 2        |

